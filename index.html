<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Klinik</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Roboto:wght@500;700;900&display=swap" rel="stylesheet"> 

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <style>
    /* === CSS NÚT CHAT NỔI (FLOATING BUTTON) === */
    .chat-btn-float {
        position: fixed;
        bottom: 100px; /* Nằm trên nút Back-to-top */
        right: 30px;
        width: 60px;
        height: 60px;
        background: #007bff;
        color: white;
        border-radius: 50%;
        border: none;
        font-size: 24px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        z-index: 9998;
        cursor: pointer;
        transition: all 0.3s;
        animation: pulse 2s infinite;
    }

    .chat-btn-float:hover {
        transform: scale(1.1);
        background: #0056b3;
    }

    @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.7); }
        70% { box-shadow: 0 0 0 15px rgba(0, 123, 255, 0); }
        100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }
    }

    /* === CSS KHUNG CHAT & VIDEO CALL === */
    #chat-widget {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 350px;
        height: 450px;
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        z-index: 9999;
        display: none; /* Mặc định ẩn */
        flex-direction: column;
        overflow: hidden;
        animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
        from { transform: translateY(50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    .chat-header {
        background: #007bff;
        color: white;
        padding: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .chat-header .doctor-info { display: flex; align-items: center; }
    .chat-header img { width: 40px; height: 40px; border-radius: 50%; margin-right: 10px; border: 2px solid white; }
    .chat-header h5 { font-size: 16px; margin: 0; color: white; }
    .chat-header small { font-size: 12px; opacity: 0.9; }
    
    .chat-actions button {
        background: none;
        border: none;
        color: white;
        font-size: 16px;
        margin-left: 10px;
        cursor: pointer;
        transition: 0.2s;
    }
    .chat-actions button:hover { transform: scale(1.2); color: #ffeb3b; }

    /* Màn hình cuộc gọi */
    #call-overlay {
        position: absolute;
        top: 70px;
        left: 0;
        width: 100%;
        height: calc(100% - 130px);
        background: #2c3e50;
        z-index: 1000;
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 20px;
    }

    #video-stream {
        width: 100%; height: 100%; object-fit: cover;
        position: absolute; top: 0; left: 0; z-index: 1; display: none;
    }

    .call-info { z-index: 2; text-align: center; color: white; margin-top: 20px; }
    .call-avatar { width: 80px; height: 80px; border-radius: 50%; border: 3px solid white; margin-bottom: 10px; }
    .call-timer { font-weight: bold; font-size: 18px; }
    .call-controls { z-index: 2; display: flex; gap: 20px; margin-bottom: 20px; }
    
    .control-btn { width: 50px; height: 50px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: 0.3s; }
    .btn-mute { background: rgba(255,255,255,0.2); color: white; }
    .btn-end { background: #ff4757; color: white; }

    /* Chat Body & Footer */
    .chat-body { flex: 1; padding: 15px; background: #f8f9fa; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
    .message { max-width: 80%; padding: 10px 15px; border-radius: 15px; font-size: 14px; }
    .message.doctor { background: #e9ecef; color: #333; align-self: flex-start; border-bottom-left-radius: 5px; }
    .message.user { background: #007bff; color: white; align-self: flex-end; border-bottom-right-radius: 5px; }
    
    .chat-footer { padding: 10px; border-top: 1px solid #eee; display: flex; background: white; }
    .chat-footer input { flex: 1; border: 1px solid #ddd; border-radius: 20px; padding: 8px 15px; outline: none; margin-right: 10px; }
    .chat-footer button { background: #007bff; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; }
</style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Vui lòng chờ...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Topbar Start -->
    <div class="container-fluid bg-light p-0 wow fadeIn" data-wow-delay="0.1s">
        <div class="row gx-0 d-none d-lg-flex">
            <div class="col-lg-7 px-5 text-start">
                <div class="h-100 d-inline-flex align-items-center py-3 me-4">
                    <small class="fa fa-map-marker-alt text-primary me-2"></small>
                    <small>Lê Văn Việt, TP.Thủ Đức</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center py-3">
                    <small class="far fa-clock text-primary me-2"></small>
                    <small id="current-date">02/11/2025</small>
                </div>
            </div>
            <div class="col-lg-5 px-5 text-end">
                <div class="h-100 d-inline-flex align-items-center py-3 me-4">
                    <small class="fa fa-phone-alt text-primary me-2"></small>
                    <small>0985188888</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center">
                    <a class="btn btn-sm-square rounded-circle bg-white text-primary me-1" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-sm-square rounded-circle bg-white text-primary me-1" href=""><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-sm-square rounded-circle bg-white text-primary me-1" href=""><i class="fab fa-linkedin-in"></i></a>
                    <a class="btn btn-sm-square rounded-circle bg-white text-primary me-0" href=""><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top p-0 wow fadeIn" data-wow-delay="0.1s">
        <a href="index.html" class="navbar-brand d-flex align-items-center px-4 px-lg-5">
            <h1 class="m-0 text-primary"><i class="far fa-hospital me-3"></i>Klinik</h1>
        </a>

        <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto p-4 p-lg-0">
                <a href="index.html" class="nav-item nav-link active">Trang chủ</a>
                <a href="about.html" class="nav-item nav-link">Về chúng tôi</a>
                <a href="service.html" class="nav-item nav-link">Dịch vụ</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Trang</a>
                    <div class="dropdown-menu rounded-0 rounded-bottom m-0">
                        <a href="feature.html" class="dropdown-item">Tính năng</a>
                        <a href="team.html" class="dropdown-item">Bác sĩ</a>
                        <a href="testimonial.html" class="dropdown-item">Lời chứng thực</a>
                    </div>
                </div>
                <a href="contact.html" class="nav-item nav-link">Liên hệ</a>
            </div>

            <button id="openLoginBtn" class="btn btn-dark rounded-0 py-4 px-lg-4 d-none d-lg-block me-2" style="border: none;">
                <i class="fa fa-user me-2"></i> Đăng nhập
            </button>

            <a href="appointment.html" class="btn btn-primary rounded-0 py-4 px-lg-5 d-none d-lg-block">
                Cuộc hẹn<i class="fa fa-arrow-right ms-3"></i>
            </a>
        </div>
    </nav>
    <!-- Navbar End -->


    <!-- account start -->
     <div class="modal-overlay" id="mainModal">
        <div class="login-container">
            <span class="close-btn" id="closeModalBtn">&times;</span>

            <div id="loginForm">
                <h2>Đăng nhập</h2>
                <br>
                <div class="input-group">
                    <input type="text" id="loginPhone" placeholder="Nhập số điện thoại">
                </div>
                <div class="input-group">
                    <input type="password" id="loginPass" placeholder="Mật khẩu">
                </div>
                <div style="text-align: right; margin-bottom: 25px;">
                    <a href="#" id="linkToForgot" style="font-size: 13px; color: #1d4ed8; text-decoration: none;">Quên mật khẩu?</a>
                </div>
                <button class="btn-primary" id="btnLoginAction">Đăng nhập</button>
                <div class="register-section" style="margin-top: 20px;">
                    Chưa có tài khoản? <a href="#" id="linkToRegister">Đăng ký ngay</a>
                </div>
            </div>

            <div id="registerForm" class="hidden">
                <h2>Tạo tài khoản</h2>
                <p class="sub-text">Điền thông tin chính xác</p>
                <div class="input-group"><input type="text" id="regName" placeholder="Họ và tên đầy đủ"></div>
                <div class="input-group"><input type="text" id="regPhone" placeholder="Số điện thoại"></div>
                <div class="input-group"><input type="number" id="regCCCD" placeholder="Số CCCD/CMND"></div>
                <div class="input-group">
                    <label style="font-size: 12px; color: #666; display: block; text-align: left; margin-bottom: 5px; margin-left: 5px;">Ngày sinh:</label>
                    <input type="date" id="regDOB" style="color: #333;">
                </div>
                <div class="input-group"><input type="password" id="regPass" placeholder="Mật khẩu (tối thiểu 6 ký tự)"></div>
                <div class="input-group"><input type="password" id="regConfirmPass" placeholder="Nhập lại mật khẩu"></div>
                <button class="btn-primary" id="btnRegisterAction">Đăng ký</button>
                <div class="register-section" style="margin-top: 15px;">
                    Đã có tài khoản? <a href="#" id="linkToLoginFromRegister">Đăng nhập</a>
                </div>
            </div>

            <div id="forgotForm" class="hidden">
                <h2>Xác minh danh tính</h2>
                <div class="input-group"><input type="text" id="verifyName" placeholder="Họ và tên"></div>
                <div class="input-group"><input type="number" id="verifyCCCD" placeholder="Số CCCD"></div>
                <div class="input-group"><input type="date" id="verifyDOB"></div>
                <button class="btn-primary" id="btnCheckInfo">Kiểm tra thông tin</button>
                <div class="register-section"><a href="#" id="linkBackToLogin1">Quay lại đăng nhập</a></div>
            </div>

            <div id="newPassForm" class="hidden">
                <h2>Tạo mật khẩu mới</h2>
                <div class="input-group"><input type="password" id="newPassMain" placeholder="Mật khẩu mới"></div>
                <div class="input-group"><input type="password" id="newPassConfirm" placeholder="Nhập lại mật khẩu mới"></div>
                <button class="btn-primary" id="btnChangePass">Lưu mật khẩu</button>
            </div>
        </div>
    </div>
    <!-- account end -->


    <!-- menu account start -->
     <div class="modal-overlay" id="userMenuModal" style="z-index: 99999;">
    <div class="login-container" style="width: 380px; padding: 40px 30px;">
        <span class="close-btn" onclick="document.getElementById('userMenuModal').classList.remove('active')">&times;</span>
        
        <div class="text-center mb-4">
            <div style="width: 80px; height: 80px; background: #EFF5FF; color: #0463FA; font-size: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; border: 2px solid #0463FA;">
                <i class="fa fa-user"></i>
            </div>
            <h4 id="menuUserName" style="margin: 0; color: #1B2C51;">Xin chào!</h4>
            <p class="text-muted" style="font-size: 14px;">Thành viên thân thiết</p>
        </div>

        <div class="d-grid gap-3">
            <button onclick="openHistoryFromMenu()" class="btn btn-light py-3 text-start shadow-sm" style="border: 1px solid #eee; transition: 0.3s;">
                <i class="fa fa-history me-3 text-primary"></i> Xem Lịch sử Đặt hẹn
            </button>
            
            <button onclick="logout()" class="btn btn-light py-3 text-start shadow-sm" style="border: 1px solid #eee; color: #dc3545; transition: 0.3s;">
                <i class="fa fa-sign-out-alt me-3"></i> Đăng xuất tài khoản
            </button>
        </div>
    </div>
</div>
<!-- menu account end -->


<!-- appointment history start -->
     <div class="modal-overlay" id="historyModal" style="z-index: 99999;">
    <div class="login-container" style="width: 600px; max-width: 95%;">
        <span class="close-btn" onclick="document.getElementById('historyModal').classList.remove('active')">&times;</span>
        <h2 class="mb-4">Lịch sử khám bệnh</h2>
        <div style="max-height: 300px; overflow-y: auto; text-align: left;">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Ngày/Giờ</th>
                        <th>Bác sĩ</th>
                        <th>Trạng thái</th>
                    </tr>
                </thead>
                <tbody id="historyTableBody">
                    </tbody>
            </table>
            <p id="noHistoryMsg" class="text-center text-muted">Chưa có lịch sử đặt hẹn nào.</p>
        </div>
    </div>
</div>
<!-- appointment history end -->


<!-- Notification start -->
 <div class="modal-overlay" id="customAlertModal" style="z-index: 100000;">
    <div class="login-container" style="width: 400px; padding: 30px; text-align: center;">
        <div id="alertIconContainer" style="font-size: 50px; margin-bottom: 20px;">
            <i id="alertIcon" class="fa-solid fa-circle-exclamation text-danger"></i>
        </div>

        <h3 id="alertTitle" style="margin-bottom: 10px; color: #333;">Thông báo</h3>
        <p id="alertMessage" class="text-muted" style="margin-bottom: 25px; font-size: 16px;">Nội dung thông báo...</p>

        <button onclick="closeCustomAlert()" class="btn btn-primary w-100 py-2" style="border-radius: 50px; font-weight: bold;">
            Đã hiểu
        </button>
    </div>
</div>
 <!-- Notification end -->


    <!-- Header Start -->
    <div class="container-fluid header bg-primary p-0 mb-5">
        <div class="row g-0 align-items-center flex-column-reverse flex-lg-row">
            <div class="col-lg-6 p-5 wow fadeIn" data-wow-delay="0.1s">
                <h1 class="display-4 text-white mb-5">Sức khỏe tốt là gốc rễ của mọi hạnh phúc</h1>
                <div class="row g-4">
                    <div class="col-sm-4">
                        <div class="border-start border-light ps-4">
                            <h2 class="text-white mb-1" data-toggle="counter-up">123</h2>
                            <p class="text-light mb-0">Bác sĩ chuyên môn</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="border-start border-light ps-4">
                            <h2 class="text-white mb-1" data-toggle="counter-up">1234</h2>
                            <p class="text-light mb-0">Đồ y tế</p>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="border-start border-light ps-4">
                            <h2 class="text-white mb-1" data-toggle="counter-up">12345</h2>
                            <p class="text-light mb-0">Tổng số bệnh nhân</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
    <div class="owl-carousel header-carousel">
        
        <div class="owl-carousel-item position-relative">
            <a href="tim-mach.html" class="d-block h-100 text-decoration-none">
                <img class="img-fluid" src="img/avt2_1.png" alt="">
                <div class="owl-carousel-text">
                    <h1 class="display-1 text-white mb-0">Tim mạch</h1>
                </div>
            </a>
        </div>

        <div class="owl-carousel-item position-relative">
            <a href="than-kinh.html" class="d-block h-100 text-decoration-none">
                <img class="img-fluid" src="img/hop2.png" alt="">
                <div class="owl-carousel-text">
                    <h1 class="display-1 text-white mb-0">Thần kinh học</h1>
                </div>
            </a>
        </div>

        <div class="owl-carousel-item position-relative">
            <a href="phoi.html" class="d-block h-100 text-decoration-none">
                <img class="img-fluid" src="img/hop3.jpeg" alt="">
                <div class="owl-carousel-text">
                    <h1 class="display-1 text-white mb-0">Phổi</h1>
                </div>
            </a>
        </div>

    </div>
</div>
        </div>
    </div>
    <!-- Header End -->


    <!-- About Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                    <div class="d-flex flex-column">
                        <img class="img-fluid rounded w-75 align-self-end" src="img/avt2_1.png" alt="">
                        <img class="img-fluid rounded w-50 bg-white pt-3 pe-3" src="img/hop3.jpeg" alt="" style="margin-top: -25%;">
                    </div>
                </div>
                <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
                    <p class="d-inline-block border rounded-pill py-1 px-4">Về chúng tôi</p>
                    <h1 class="mb-4">Tại sao bạn nên tin tưởng chúng tôi? Tìm hiểu về chúng tôi!</h1>
                    <p>
                        Đừng để cả nỗi đau và kim cương đứng yên, nhưng cả hai đều sẽ đau đớn. Không, đó không phải là một đại lý bất động sản. Hãy để nỗi đau của cả hai là vô số, nhưng hãy để nỗi đau trở nên thiêng liêng đối với họ.</p>
                    <p class="mb-4">Đừng để cả nỗi đau và kim cương đứng yên, nhưng cả hai đều sẽ đau đớn. Không, đó không phải là một đại lý bất động sản. Hãy để nỗi đau của cả hai là vô số, nhưng hãy để nỗi đau trở nên thiêng liêng đối với họ.</p>
                    <p><i class="far fa-check-circle text-primary me-3"></i>Chăm sóc sức khỏe chất lượng</p>
                    <p><i class="far fa-check-circle text-primary me-3"></i>Chỉ có bác sĩ có trình độ</p>
                    <p><i class="far fa-check-circle text-primary me-3"></i>Chuyên gia nghiên cứu y tế</p>
                    <a class="btn btn-primary rounded-pill py-3 px-5 mt-3" href="feature.html">Đọc thêm</a>
                </div>
            </div>
        </div>
    </div>
    <!-- About End -->


    <!-- Service Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                <p class="d-inline-block border rounded-pill py-1 px-4">Dịch vụ</p>
                <h1>Giải pháp chăm sóc sức khỏe</h1>
            </div>
            <div class="row g-4">
        
               <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
    <div class="service-item bg-light rounded h-100 p-5">
        <div class="d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4" style="width: 65px; height: 65px;">
            <i class="fa fa-heartbeat text-primary fs-4"></i>
        </div>
        <h4 class="mb-3"><a href="tim-mach.html" class="text-dark text-decoration-none">Tim mạch</a></h4>
        <p class="mb-4">Thông qua việc chăm sóc bản thân hàng ngày, chúng ta có thể duy trì được sức khoẻ tinh thần và thể chất, cải thiện tâm trạng</p>
        <a class="btn" href="tim-mach.html"><i class="fa fa-plus text-primary me-3"></i>Đọc thêm</a>
    </div>
</div>
<div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.3s">

                    <div class="service-item bg-light rounded h-100 p-5">

                        <div class="d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4" style="width: 65px; height: 65px;">

                            <i class="fa fa-x-ray text-primary fs-4"></i>

                        </div>

                        <h4 class="mb-3">Phổi</h4>

                        <p class="mb-4">Thông qua việc chăm sóc bản thân hàng ngày, chúng ta có thể duy trì được sức khoẻ tinh thần và thể chất, cải thiện tâm trạng</p>

                        <a class="btn" href="phoi.html"><i class="fa fa-plus text-primary me-3"></i>Đọc thêm</a>

                    </div>

                </div>
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="service-item bg-light rounded h-100 p-5">
                        <div class="d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4" style="width: 65px; height: 65px;">
                            <i class="fa fa-brain text-primary fs-4"></i>
                        </div>
                        <h4 class="mb-3">Thần kinh học</h4>
                        <p class="mb-4">Thông qua việc chăm sóc bản thân hàng ngày, chúng ta có thể duy trì được sức khoẻ tinh thần và thể chất, cải thiện tâm trạng</p>
                        <a class="btn" href="than-kinh.html"><i class="fa fa-plus text-primary me-3"></i>Đọc thêm</a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="service-item bg-light rounded h-100 p-5">
                        <div class="d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4" style="width: 65px; height: 65px;">
                            <i class="fa fa-wheelchair text-primary fs-4"></i>
                        </div>
                        <h4 class="mb-3">Chỉnh hình</h4>
                        <p class="mb-4">Thông qua việc chăm sóc bản thân hàng ngày, chúng ta có thể duy trì được sức khoẻ tinh thần và thể chất, cải thiện tâm trạng</p>
                        <a class="btn" href="chinh-hinh.html"><i class="fa fa-plus text-primary me-3"></i>Đọc thêm</a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                    <div class="service-item bg-light rounded h-100 p-5">
                        <div class="d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4" style="width: 65px; height: 65px;">
                            <i class="fa fa-tooth text-primary fs-4"></i>
                        </div>
                        <h4 class="mb-3">Phẫu thuật nha khoa</h4>
                        <p class="mb-4">Thông qua việc chăm sóc bản thân hàng ngày, chúng ta có thể duy trì được sức khoẻ tinh thần và thể chất, cải thiện tâm trạng</p>
                        <a class="btn" href="nha-khoa.html"><i class="fa fa-plus text-primary me-3"></i>Đọc thêm</a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="service-item bg-light rounded h-100 p-5">
                        <div class="d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4" style="width: 65px; height: 65px;">
                            <i class="fa fa-vials text-primary fs-4"></i>
                        </div>
                        <h4 class="mb-3">Phòng thí nghiệm</h4>
                        <p class="mb-4">Thông qua việc chăm sóc bản thân hàng ngày, chúng ta có thể duy trì được sức khoẻ tinh thần và thể chất, cải thiện tâm trạng</p>
                        <a class="btn" href="xet-nghiem.html"><i class="fa fa-plus text-primary me-3"></i>Đọc thêm</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Service End -->


    <!-- Feature Start -->
    <div class="container-fluid bg-primary overflow-hidden my-5 px-lg-0">
        <div class="container feature px-lg-0">
            <div class="row g-0 mx-lg-0">
                <div class="col-lg-6 feature-text py-5 wow fadeIn" data-wow-delay="0.1s">
                    <div class="p-lg-5 ps-lg-0">
                        <p class="d-inline-block border rounded-pill text-light py-1 px-4">Đặc trưng</p>
                        <h1 class="text-white mb-4">Tại sao chọn chúng tôi</h1>
                        <p class="text-white mb-4 pb-2">Đáp ứng mọi yêu cầu chữa trị cho người bệnh trong một thập kỷ, làm nền tảng để đáp ứng nhu cầu chăm sóc sức khỏe khách hàng trong thời kỳ sau đó.</p>
                        <div class="row g-4">
                            <div class="col-6">
                                <div class="d-flex align-items-center">
                                    <div class="d-flex flex-shrink-0 align-items-center justify-content-center rounded-circle bg-light" style="width: 55px; height: 55px;">
                                        <i class="fa fa-user-md text-primary"></i>
                                    </div>
                                    <div class="ms-4">
                                        <p class="text-white mb-2">Kinh nghiệm</p>
                                        <h5 class="text-white mb-0">Nhiêu bác sĩ</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="d-flex align-items-center">
                                    <div class="d-flex flex-shrink-0 align-items-center justify-content-center rounded-circle bg-light" style="width: 55px; height: 55px;">
                                        <i class="fa fa-check text-primary"></i>
                                    </div>
                                    <div class="ms-4">
                                        <p class="text-white mb-2">Chất lượng</p>
                                        <h5 class="text-white mb-0">Dịch vụ</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="d-flex align-items-center">
                                    <div class="d-flex flex-shrink-0 align-items-center justify-content-center rounded-circle bg-light" style="width: 55px; height: 55px;">
                                        <i class="fa fa-comment-medical text-primary"></i>
                                    </div>
                                    <div class="ms-4">
                                        <p class="text-white mb-2">Tích cực</p>
                                        <h5 class="text-white mb-0">Tư vấn</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="d-flex align-items-center">
                                    <div class="d-flex flex-shrink-0 align-items-center justify-content-center rounded-circle bg-light" style="width: 55px; height: 55px;">
                                        <i class="fa fa-headphones text-primary"></i>
                                    </div>
                                    <div class="ms-4">
                                        <p class="text-white mb-2">24 giờ</p>
                                        <h5 class="text-white mb-0">Hỗ trợ</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 pe-lg-0 wow fadeIn" data-wow-delay="0.5s" style="min-height: 400px;">
                    <div class="position-relative h-100">
                        <img class="position-absolute img-fluid w-100 h-100" src="img/traodoi.png" style="object-fit: cover;" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Feature End -->


    <!-- Team Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                <p class="d-inline-block border rounded-pill py-1 px-4">Bác sĩ</p>
                <h1>Kinh nghiệm của chúng tôi</h1>
            </div>
            <div class="row g-4">
                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="team-item position-relative rounded overflow-hidden">
                        <div class="overflow-hidden">
                            <img class="img-fluid" src="https://hthaostudio.com/wp-content/uploads/2022/03/Anh-bac-si-nam-7-min.jpg.webp" alt="">
                        </div>
                        <div class="team-text bg-light text-center p-4">
                            <h5>BS. Bùi Nhật Nam</h5>
                            <p class="text-primary">Chỉnh hình - 15 năm kinh nghiệm</p>
                            <div class="team-social text-center">
                                <a class="btn btn-square" href=""><i class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-twitter"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                    <div class="team-item position-relative rounded overflow-hidden">
                        <div class="overflow-hidden">
                            <img class="img-fluid" src="https://studiochupanhdep.com/Upload/Images/Album/anh-bac-sy-04.jpg" alt="">
                        </div>
                        <div class="team-text bg-light text-center p-4">
                            <h5>BS. Nguyễn Hải Yến</h5>
                            <p class="text-primary">Sản phụ khoa - 7 năm <br>kinh nghiệm</p>
                            <div class="team-social text-center">
                                <a class="btn btn-square" href=""><i class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-twitter"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="team-item position-relative rounded overflow-hidden">
                        <div class="overflow-hidden">
                            <img class="img-fluid" src="https://suckhoedoisong.qltns.mediacdn.vn/324455921873985536/2023/12/25/1-17035025379211648167770.png" alt="">
                        </div>
                        <div class="team-text bg-light text-center p-4">
                            <h5>BS. Bùi Nhật Nam</h5>
                            <p class="text-primary">Phổi & Hô hấp - 13 năm <br>kinh nghiệm</p>
                            <div class="team-social text-center">
                                <a class="btn btn-square" href=""><i class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-twitter"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.7s">
                    <div class="team-item position-relative rounded overflow-hidden">
                        <div class="overflow-hidden">
                            <img class="img-fluid" src="https://honghunghospital.com.vn/wp-content/uploads/2020/05/41.-Phan-V%C4%83n-Ch%C3%AD-scaled.jpg" alt="">
                        </div>
                        <div class="team-text bg-light text-center p-4">
                            <h5>BS. Nguyễn Minh Hoàng</h5>
                            <p class="text-primary">Chuyên khoa Tim mạch - 12 năm kinh nghiệm</p>
                            <div class="team-social text-center">
                                <a class="btn btn-square" href=""><i class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-twitter"></i></a>
                                <a class="btn btn-square" href=""><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Team End -->


    <!-- Appointment Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                    <p class="d-inline-block border rounded-pill py-1 px-4">Cuộc hẹn</p>
                    <h1 class="mb-4">Đặt lịch hẹn đến thăm bác sĩ của chúng tôi</h1>
                    <p class="mb-4">Đáp ứng mọi yêu cầu chữa trị cho người bệnh trong một thập kỷ, làm nền tảng để đáp ứng nhu cầu chăm sóc sức khỏe khách hàng trong thời kỳ sau đó.</p>
                    <div class="bg-light rounded d-flex align-items-center p-5 mb-4">
                        <div class="d-flex flex-shrink-0 align-items-center justify-content-center rounded-circle bg-white" style="width: 55px; height: 55px;">
                            <i class="fa fa-phone-alt text-primary"></i>
                        </div>
                        <div class="ms-4">
                            <p class="mb-2">Gọi cho chúng tôi ngay</p>
                            <h5 class="mb-0">0985188888</h5>
                        </div>
                    </div>
                    <div class="bg-light rounded d-flex align-items-center p-5">
                        <div class="d-flex flex-shrink-0 align-items-center justify-content-center rounded-circle bg-white" style="width: 55px; height: 55px;">
                            <i class="fa fa-envelope-open text-primary"></i>
                        </div>
                        <div class="ms-4">
                            <p class="mb-2">Gửi thư cho chúng tôi ngay</p>
                            <h5 class="mb-0">Klinik@gmail.com</h5>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="bg-light rounded h-100 d-flex align-items-center p-5">
                        <form id="appointmentForm">
                            <div class="row g-3">
                            <div class="col-12 col-sm-6">
                                <input type="text" id="apptName" class="form-control border-0" placeholder="Tên của bạn" style="height: 55px;">
                            </div>
                            <div class="col-12 col-sm-6">
                                <input type="email" id="apptEmail" class="form-control border-0" placeholder="Email của bạn" style="height: 55px;">
                            </div>
                            <div class="col-12 col-sm-6">
                                <input type="text" id="apptPhone" class="form-control border-0" placeholder="Số điện thoại của bạn" style="height: 55px;">
                            </div>
                            <div class="col-12 col-sm-6">
                                <select id="apptDoctor" class="form-select border-0" style="height: 55px;">
                                    <option selected value="">Chọn bác sĩ</option>
                                        <option value="Nguyễn Minh Hoàng">BS. Nguyễn Minh Hoàng</option>
                                        <option value="Trần Thu Hà">BS. Trần Thu Hà</option>
                                        <option value="Lê Quốc Dũng">BS. Lê Quốc Dũng</option>
                                        <option value="Phạm Ngọc Ánh">BS. Phạm Ngọc Ánh</option>
                                        <option value="Vũ Khánh Linh">BS. Vũ Khánh Linh</option>
                                        <option value="Bùi Nhật Nam">BS. Bùi Nhật Nam</option>
                                        <option value="Hoàng Đức Thịnh">BS. Hoàng Đức Thịnh</option>
                                        <option value="Nguyễn Hải Yến">BS. Nguyễn Hải Yến</option>
                                </select>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="date" id="date" data-target-input="nearest">
                                    <input type="text" id="apptDate" class="form-control border-0 datetimepicker-input" placeholder="Chọn ngày" data-target="#date" data-toggle="datetimepicker" style="height: 55px;">
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="time" id="time" data-target-input="nearest">
                                    <input type="text" id="apptTime" class="form-control border-0 datetimepicker-input" placeholder="Chọn giờ" data-target="#time" data-toggle="datetimepicker" style="height: 55px;">
                                </div>
                            </div>
                            <div class="col-12">
                                <textarea id="apptNote" class="form-control border-0" rows="5" placeholder="Hãy mô tả vấn đề của bạn"></textarea>
                            </div>
                            <div class="col-12">
                                    <button id="btnBookAppointment" type="button" class="btn btn-primary w-100 py-3">Đặt lịch hẹn</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Appointment End -->


    <!-- Testimonial Start -->
      <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                <p class="d-inline-block border rounded-pill py-1 px-4">Đánh giá từ khách hàng</p>
                <h1>Bệnh nhân nói gì về Klinik?</h1>
            </div>
            <div class="owl-carousel testimonial-carousel wow fadeInUp" data-wow-delay="0.1s">
                
                <div class="testimonial-item text-center">
                    <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/testimonial-1.png" style="width: 100px; height: 100px;">
                    <div class="testimonial-text rounded text-center p-4">
                        <div class="mb-3">
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                        </div>
                        <p>"Tôi đã phẫu thuật dây chằng tại đây và kết quả thật tuyệt vời. Bác sĩ trưởng khoa rất tận tâm, giải thích cặn kẽ trước khi mổ. Sau 3 tháng tôi đã có thể vận động nhẹ nhàng trở lại."</p>
                        <h5 class="mb-1">Nguyễn Văn An</h5>
                        <span class="fst-italic text-primary">Huấn luyện viên thể thao</span>
                    </div>
                </div>

                <div class="testimonial-item text-center">
                    <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/testimonial-2.jpeg" style="width: 100px; height: 100px;">
                    <div class="testimonial-text rounded text-center p-4">
                        <div class="mb-3">
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                        </div>
                        <p>"Điều tôi ấn tượng nhất là sự sạch sẽ và quy trình làm việc chuyên nghiệp. Đặt lịch qua web rất tiện, đến là được khám ngay không phải chờ đợi mệt mỏi như nơi khác."</p>
                        <h5 class="mb-1">Trần Thị Mai</h5>
                        <span class="fst-italic text-primary">Nhân viên văn phòng</span>
                    </div>
                </div>

                <div class="testimonial-item text-center">
                    <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/testimonial-3.jpg" style="width: 100px; height: 100px;">
                    <div class="testimonial-text rounded text-center p-4">
                        <div class="mb-3">
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                            <small class="fa fa-star text-warning"></small>
                        </div>
                        <p>"Đội ngũ y tá và điều dưỡng rất nhẹ nhàng, chu đáo. Mẹ tôi lớn tuổi đi khám bệnh thường hay lo lắng nhưng các cô đã giúp bà cảm thấy rất thoải mái và an tâm."</p>
                        <h5 class="mb-1">Lê Minh Tuấn</h5>
                        <span class="fst-italic text-primary">Kỹ sư phần mềm</span>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- Testimonial End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-light mb-4">Địa chỉ</h5>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>Lê Văn Việt,TP.Thủ Đức</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>0985188888</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>Klinik@gmail.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social rounded-circle" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social rounded-circle" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social rounded-circle" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social rounded-circle" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-light mb-4">Dịch vụ</h5>
                    <a class="btn btn-link" href="tim-mach.html">Tim mạch</a>
                    <a class="btn btn-link" href="phoi.html">Phổi</a>
                    <a class="btn btn-link" href="than-kinh.html">Thần kinh học</a>
                    <a class="btn btn-link" href="chinh-hinh.html">Chỉnh hình</a>
                    <a class="btn btn-link" href="nha-khoa.html">Phẩu thuật nha khoa</a>
                    <a class="btn btn-link" href="xet-nghiem.html">Phòng thí nghiệm</a>
                </div>
               <div class="col-lg-3 col-md-6">
                    <h5 class="text-light mb-4">Đường dẫn nhanh</h5>
                    <a class="btn btn-link" href="about.html">Về chúng tôi</a>
                    <a class="btn btn-link" href="contact.html">Liên hệ chúng tôi</a>
                    <a class="btn btn-link" href="service.html">Dịch vụ</a>
                    <a class="btn btn-link" href="dieu-khoan.html">Điều khoản & Điều kiện</a>
                    <a class="btn btn-link" href="ho-tro.html">Hỗ trợ</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-light mb-4">Bản tin</h5>
                    <p>Sự quan tâm đúng mức đến sức khỏe luôn là điều quan trọng và cần thiết.</p>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">Hihi</a>, All Right Reserved.
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
   <a href="#" class="btn btn-lg btn-primary btn-lg-square rounded-circle back-to-top"><i class="bi bi-arrow-up"></i></a>


    <button class="chat-btn-float" onclick="toggleChat()">
        <i class="fa fa-comments"></i>
    </button>

    <div id="chat-widget">
        <div class="chat-header">
            <div class="doctor-info">
                <img src="https://img.freepik.com/free-photo/smiling-doctor-with-strethoscope-isolated-grey_651396-974.jpg?w=200" alt="Doctor">
                <div>
                    <h5>BS. Minh Anh</h5>
                    <small><i class="fa fa-circle text-success" style="font-size: 8px;"></i> Trực tuyến</small>
                </div>
            </div>
            <div class="chat-actions">
                <button onclick="startCall('voice')" title="Gọi thoại"><i class="fa fa-phone"></i></button>
                <button onclick="startCall('video')" title="Gọi Video"><i class="fa fa-video"></i></button>
                <button onclick="toggleChat()"><i class="fa fa-times"></i></button>
            </div>
        </div>

        <div id="call-overlay">
            <video id="video-stream" autoplay playsinline muted></video>
            <div class="call-info">
                <img src="https://img.freepik.com/free-photo/smiling-doctor-with-strethoscope-isolated-grey_651396-974.jpg?w=200" class="call-avatar" id="callAvatar">
                <h5 class="mt-2">BS. Minh Anh</h5>
                <p id="callStatus">Đang kết nối...</p>
                <div class="call-timer" id="callTimer">00:00</div>
            </div>
            <div class="call-controls">
                <button class="control-btn btn-mute" onclick="toggleMute()"><i class="fa fa-microphone"></i></button>
                <button class="control-btn btn-end" onclick="endCall()"><i class="fa fa-phone-slash"></i></button>
            </div>
        </div>

        <div class="chat-body" id="chatBody">
            <div class="message doctor">Xin chào! Tôi có thể giúp gì cho sức khỏe của bạn hôm nay?</div>
        </div>

        <div class="chat-footer">
            <input type="text" id="chatInput" placeholder="Nhập tin nhắn..." onkeypress="handleEnter(event)">
            <button onclick="sendMessage()"><i class="fa fa-paper-plane"></i></button>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    ```


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
    <script src="js/realTime.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script>
    // === 1. XỬ LÝ CHAT ===
    function toggleChat() {
        const chatWidget = document.getElementById('chat-widget');
        const btnFloat = document.querySelector('.chat-btn-float');
        
        if (chatWidget.style.display === 'none' || chatWidget.style.display === '') {
            chatWidget.style.display = 'flex';
            btnFloat.style.display = 'none'; // Ẩn nút tròn khi mở chat
            setTimeout(() => document.getElementById('chatInput').focus(), 100);
        } else {
            chatWidget.style.display = 'none';
            btnFloat.style.display = 'block'; // Hiện lại nút tròn
        }
    }

    function sendMessage() {
        const input = document.getElementById('chatInput');
        const text = input.value.trim();
        if (text) {
            addMessage(text, 'user');
            input.value = "";
            setTimeout(() => addMessage("Cảm ơn bạn. Bác sĩ sẽ phản hồi ngay lập tức.", 'doctor'), 1000);
        }
    }

    function handleEnter(e) { if(e.key === 'Enter') sendMessage(); }

    function addMessage(text, sender) {
        const chatBody = document.getElementById('chatBody');
        const div = document.createElement('div');
        div.className = `message ${sender}`;
        div.innerText = text;
        chatBody.appendChild(div);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    // === 2. XỬ LÝ GỌI VIDEO/VOICE (WEBRTC) ===
    let localStream;
    let timerInterval;
    let seconds = 0;

    async function startCall(type) {
        const overlay = document.getElementById('call-overlay');
        const videoElem = document.getElementById('video-stream');
        const avatar = document.getElementById('callAvatar');
        
        overlay.style.display = 'flex';
        
        try {
            const constraints = { audio: true, video: type === 'video' };
            localStream = await navigator.mediaDevices.getUserMedia(constraints);

            if (type === 'video') {
                videoElem.srcObject = localStream;
                videoElem.style.display = 'block';
                avatar.style.display = 'none';
            } else {
                videoElem.style.display = 'none';
                avatar.style.display = 'block';
            }
            
            document.getElementById('callStatus').innerText = "Đã kết nối";
            startTimer();
        } catch (err) {
            alert("Không thể truy cập Camera/Micro. Vui lòng kiểm tra quyền trình duyệt.");
            endCall();
        }
    }

    function endCall() {
        if (localStream) localStream.getTracks().forEach(track => track.stop());
        document.getElementById('call-overlay').style.display = 'none';
        document.getElementById('video-stream').srcObject = null;
        clearInterval(timerInterval);
        seconds = 0;
    }

    function toggleMute() {
        if (localStream) {
            localStream.getAudioTracks()[0].enabled = !localStream.getAudioTracks()[0].enabled;
        }
    }

    function startTimer() {
        document.getElementById('callTimer').innerText = "00:00";
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            seconds++;
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            document.getElementById('callTimer').innerText = 
                `${mins<10?'0':''}${mins}:${secs<10?'0':''}${secs}`;
        }, 1000);
    }
</script>


<!-- script account start -->
 <script>
    // === CẤU HÌNH CHUNG ===
    const modal = document.getElementById('mainModal');
    const historyModal = document.getElementById('historyModal');
    const openBtn = document.getElementById('openLoginBtn');
    const closeBtn = document.getElementById('closeModalBtn');
    
    const forms = {
        login: document.getElementById('loginForm'),
        register: document.getElementById('registerForm'),
        forgot: document.getElementById('forgotForm'),
        newPass: document.getElementById('newPassForm')
    };

    // === QUẢN LÝ DỮ LIỆU ===
    // 1. Danh sách tài khoản
    let users = JSON.parse(localStorage.getItem('DS_TAI_KHOAN')) || [];
    // 2. Danh sách lịch hẹn (Mới thêm)
    let appointments = JSON.parse(localStorage.getItem('DS_LICH_HEN')) || [];
    // 3. Phiên đăng nhập hiện tại (Để nhớ ai đang online)
    let currentUser = JSON.parse(localStorage.getItem('CURRENT_USER')) || null;

    function saveData() {
        localStorage.setItem('DS_TAI_KHOAN', JSON.stringify(users));
        localStorage.setItem('DS_LICH_HEN', JSON.stringify(appointments));
        localStorage.setItem('CURRENT_USER', JSON.stringify(currentUser));
    }

    // === CẬP NHẬT GIAO DIỆN KHI TẢI TRANG ===
    // --- CẬP NHẬT GIAO DIỆN  ---
    function updateUI() {
        if (currentUser) {
            // 1. Thay đổi nút bấm thành tên người dùng
            openBtn.innerHTML = `<i class="fa fa-user-circle me-2"></i> ${currentUser.name}`;
            openBtn.classList.replace('btn-dark', 'btn-outline-primary');
            openBtn.style.fontWeight = "bold";
            
            // 2. Khi bấm vào tên -> Mở Modal Menu đẹp (Không dùng confirm nữa)
            openBtn.onclick = () => {
                document.getElementById('menuUserName').innerText = `Xin chào, ${currentUser.name}!`;
                document.getElementById('userMenuModal').classList.add('active');
            };
        } else {
            // Trạng thái chưa đăng nhập
            openBtn.innerHTML = `<i class="fa fa-user me-2"></i> Đăng nhập`;
            openBtn.classList.replace('btn-outline-primary', 'btn-dark');
            openBtn.style.fontWeight = "normal";
            openBtn.onclick = () => { modal.classList.add('active'); showForm('login'); };
        }
    }
    // Chạy ngay khi load trang
    updateUI();

    // --- HÀM MỞ LỊCH SỬ TỪ MENU MỚI ---
    function openHistoryFromMenu() {
        // Đóng menu tài khoản trước
        document.getElementById('userMenuModal').classList.remove('active');
        // Mở bảng lịch sử
        showHistory();
    }

    // --- HÀM HIỂN THỊ THÔNG  ---
    function showCustomAlert(message, type = 'error') {
        const modal = document.getElementById('customAlertModal');
        const icon = document.getElementById('alertIcon');
        const title = document.getElementById('alertTitle');
        const msg = document.getElementById('alertMessage');

        // Cấu hình giao diện dựa trên loại thông báo (success / error)
        if (type === 'success') {
            icon.className = "fa-solid fa-circle-check text-success"; // Icon tích xanh
            title.innerText = "✅";
            title.style.color = "#198754";
        } else {
            icon.className = "fa-solid fa-circle-exclamation text-danger"; // Icon chấm than đỏ
            title.innerText = "⚠️";
            title.style.color = "#dc3545";
        }

        msg.innerText = message;
        modal.classList.add('active');
    }

    function closeCustomAlert() {
        document.getElementById('customAlertModal').classList.remove('active');
    }

    // --- HÀM ĐĂNG XUẤT ---
    function logout() {
        if(confirm("Bạn có chắc chắn muốn đăng xuất không?")) {
            currentUser = null;
            saveData();
            location.reload();
        }
    }
    // === CÁC HÀM LOGIN / REGISTER ===
    function showForm(name) { Object.values(forms).forEach(f => f.classList.add('hidden')); forms[name].classList.remove('hidden'); }
    if(closeBtn) closeBtn.onclick = () => modal.classList.remove('active');
    window.onclick = (e) => { if (e.target === modal) modal.classList.remove('active'); };

    // Chuyển đổi form
    document.getElementById('linkToRegister').onclick = (e) => { e.preventDefault(); showForm('register'); };
    document.getElementById('linkToLoginFromRegister').onclick = (e) => { e.preventDefault(); showForm('login'); };
    document.getElementById('linkToForgot').onclick = (e) => { e.preventDefault(); showForm('forgot'); };
    document.getElementById('linkBackToLogin1').onclick = (e) => { e.preventDefault(); showForm('login'); };

    // Xử lý Đăng ký
    document.getElementById('btnRegisterAction').onclick = () => {
    const name = document.getElementById('regName').value.trim();
    const phone = document.getElementById('regPhone').value.trim();
    const pass = document.getElementById('regPass').value;
    // Thêm 2 dòng này
    const cccd = document.getElementById('regCCCD').value.trim();
    const dob = document.getElementById('regDOB').value;
    
    // Check đủ dữ liệu
    if(!name || !phone || !pass || !cccd || !dob) { alert("Vui lòng điền đầy đủ thông tin!"); return; }
    if(users.find(u => u.phone === phone)) { alert("Số điện thoại này đã tồn tại!"); return; }

    // Lưu đủ 5 trường thông tin
    users.push({ name, phone, pass, cccd, dob });
    saveData();
    showCustomAlert("Đăng ký thành công! Vui lòng đăng nhập ngay.", "success");
    
    // Chuyển giao diện về form đăng nhập ngay lập tức
    showForm('login');
    
    // Tự động điền sđt vừa đăng ký vào ô đăng nhập cho tiện (tùy chọn)
    document.getElementById('loginPhone').value = phone;
};

    // Xử lý Đăng nhập
    document.getElementById('btnLoginAction').onclick = () => {
        const phone = document.getElementById('loginPhone').value.trim();
        const pass = document.getElementById('loginPass').value;
        
        // Tìm tài khoản trong danh sách
        const user = users.find(u => u.phone === phone && u.pass === pass);
        
        if(user) {
            currentUser = user; 
            saveData();
            
            // 1. Ẩn form đăng nhập ngay
            modal.classList.remove('active');
            
            // 2. Cập nhật tên người dùng lên menu
            updateUI();

            // 3. Hiện thông báo THÀNH CÔNG (Màu xanh)
            showCustomAlert("Đăng nhập thành công! Xin chào " + user.name, "success");

        } else {
            // 4. Hiện thông báo LỖI
            showCustomAlert("Sai số điện thoại hoặc mật khẩu!", "error");
        }
    };

    function logout() {
        currentUser = null;
        saveData();
        location.reload(); // Tải lại trang
    }

    // --- XỬ LÝ QUÊN MẬT KHẨU & ĐỔI MẬT KHẨU  ---
    // Biến tạm lưu user đang reset pass
    let userDangQuenMatKhau = null;

    // 1. Nút Kiểm tra thông tin (Ở Modal Quên mật khẩu)
    document.getElementById('btnCheckInfo').onclick = () => {
        // Lấy dữ liệu nhập
        const inputName = document.getElementById('verifyName').value.trim();
        const inputCCCD = document.getElementById('verifyCCCD').value.trim();
        const inputDOB = document.getElementById('verifyDOB').value;

        // Tìm user khớp thông tin
        const foundUser = users.find(user => 
            user.name === inputName && 
            user.cccd === inputCCCD && 
            user.dob === inputDOB
        );

        if (foundUser) {
            // Nếu đúng -> Lưu tạm -> Chuyển sang form đổi pass
            userDangQuenMatKhau = foundUser;
            showCustomAlert("Xác minh thành công! Vui lòng đặt mật khẩu mới.", "success");
            
            // Đợi user đọc thông báo xong mới chuyển form
            setTimeout(() => {
                closeCustomAlert();
                showForm('newPass'); 
            }, 1500);
        } else {
            showCustomAlert("Thông tin xác minh không chính xác!", "error");
        }
    };

    // 2. Nút Lưu mật khẩu mới (Ở Modal Mật khẩu mới)
    document.getElementById('btnChangePass').onclick = () => {
        const p1 = document.getElementById('newPassMain').value;
        const p2 = document.getElementById('newPassConfirm').value;

        if (p1.length < 6) { 
            showCustomAlert("Mật khẩu quá ngắn (tối thiểu 6 ký tự)!", "error"); 
            return; 
        }
        if (p1 !== p2) { 
            showCustomAlert("Hai mật khẩu không khớp nhau!", "error"); 
            return; 
        }

        if (userDangQuenMatKhau) {
            // Cập nhật mật khẩu mới cho user đó (vì là tham chiếu object nên mảng users cũng tự cập nhật)
            userDangQuenMatKhau.pass = p1; // Lưu ý: key là 'pass' hay 'password' tùy code cũ của bạn, ở đây mình dùng 'pass' theo code đăng ký ở trên
            
            // Lưu lại vào LocalStorage
            saveData();

            showCustomAlert("Đổi mật khẩu thành công! Vui lòng đăng nhập lại.", "success");
            
            // Reset biến tạm & Quay về login
            userDangQuenMatKhau = null;
            setTimeout(() => {
                closeCustomAlert();
                showForm('login');
            }, 1500);
        }
    };

    // --- ĐẶT LỊCH HẸN (ĐÃ NÂNG CẤP GIAO DIỆN THÔNG BÁO) ---
        document.getElementById('btnBookAppointment').onclick = () => {
            // 1. Kiểm tra đăng nhập
            if (!currentUser) {
                // Dùng thông báo mới thay vì alert
                showCustomAlert("Bạn cần ĐĂNG NHẬP để có thể đặt lịch hẹn!", "error");
                
                
                setTimeout(() => {
                    modal.classList.add('active'); 
                    showForm('login');
                }, 1500); // Delay 1.5s cho mượt
                return;
            }

            // 2. Lấy dữ liệu
            const pName = document.getElementById('apptName').value.trim();
            const pDoctor = document.getElementById('apptDoctor').value;
            const pDate = document.getElementById('apptDate').value;
            const pTime = document.getElementById('apptTime').value;

            // Kiểm tra dữ liệu trống
            if(!pName || !pDoctor || !pDate || !pTime) { 
                showCustomAlert("Vui lòng điền đầy đủ thông tin đặt hẹn!", "error"); 
                return; 
            }

            // 3. Lưu lịch
            appointments.push({
                userAccount: currentUser.phone, 
                patientName: pName,
                doctor: pDoctor,
                date: pDate,
                time: pTime,
                status: "Đã xác nhận"
            });
            saveData();
            
            // Thông báo thành công
            showCustomAlert("ĐẶT LỊCH THÀNH CÔNG!\nBạn có thể kiểm tra lại trong phần Lịch sử.", "success");
            
            // Reset form
            document.getElementById('appointmentForm').reset();
        };

    // === LOGIC XEM LỊCH SỬ ===
    function showHistory() {
        if(!currentUser) return;

        const tbody = document.getElementById('historyTableBody');
        const noMsg = document.getElementById('noHistoryMsg');
        tbody.innerHTML = ''; // Xóa cũ

        // Lọc lịch sử CỦA RIÊNG user hiện tại
        const myHistory = appointments.filter(app => app.userAccount === currentUser.phone);

        if (myHistory.length > 0) {
            noMsg.style.display = 'none';
            myHistory.forEach(item => {
                tbody.innerHTML += `
                    <tr>
                        <td>${item.time} <br> ${item.date}</td>
                        <td>${item.doctor}</td>
                        <td><span class="badge bg-success">${item.status}</span></td>
                    </tr>
                `;
            });
        } else {
            noMsg.style.display = 'block';
        }

        historyModal.classList.add('active');
    }
</script>
<!-- end account -->


</body>

</html>

